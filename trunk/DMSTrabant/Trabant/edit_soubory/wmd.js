'use strict';var Markdown={};
(function(){function i(g){return g}function p(){return!1}function o(){}function r(){}o.prototype={chain:function(g,k){var h=this[g];if(!h)throw Error("unknown hook "+g);this[g]=h===i?k:function(g){var m=Array.prototype.slice.call(arguments,0);m[0]=h.apply(null,m);return k.apply(null,m)}},set:function(g,k){if(!this[g])throw Error("unknown hook "+g);this[g]=k},addNoop:function(g){this[g]=i},addFalse:function(g){this[g]=p}};Markdown.HookCollection=o;r.prototype={set:function(g,k){this["s_"+g]=k},get:function(g){return this["s_"+
g]}};Markdown.Converter=function(){function g(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,b,N,c,d,l){b=b.toLowerCase();G.set(b,f(N));if(d)return c;l&&E.set(b,l.replace(/"/g,"&quot;"));return""})}function k(a){a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,h);a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,
h);a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,h);a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,h);return a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,h)}function h(a,b){var c;c=b.replace(/^\n+/,"");c=c.replace(/\n+$/g,"");return c="\n\n~K"+(B.push(c)-1)+"K\n\n"}function i(a,f){a=w.preBlockGamut(a,M);a=A(a);a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,
"<hr />\n");a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,"<hr />\n");a=j(a);a=C(a);a=b(a);a=w.postBlockGamut(a,M);a=k(a);return a=c(a,f)}function m(a){a=w.preSpanGamut(a);a=d(a);a=p(a);a=a.replace(/\\(\\)/g,z);a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,z);a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,s);a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,s);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,y);a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,
y);a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,y);a=H(a);a=a.replace(/~P/g,"://");a=f(a);a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4");a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4");a=a.replace(/  +\n/g," <br>\n");return a=w.postSpanGamut(a)}function p(a){return a=a.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=
q(b,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function y(a,b,c,f,d,x,e,B){void 0==B&&(B="");a=c.replace(/:\/\//g,"~P");f=f.toLowerCase();if(""==d)if(""==f&&(f=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=G.get(f))d=G.get(f),void 0!=E.get(f)&&(B=E.get(f));else if(-1<b.search(/\(\s*\)$/m))d="";else return b;d=l(d);d=q(d,"*_");b='<a href="'+d+'"';""!=B&&(B=n(B),B=q(B,"*_"),b+=' title="'+B+'"');return b+(">"+a+"</a>")}function n(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}
function s(a,b,c,f,d,l,x,e){a=c;f=f.toLowerCase();e||(e="");if(""==d)if(""==f&&(f=a.toLowerCase().replace(/ ?\n/g," ")),void 0!=G.get(f))d=G.get(f),void 0!=E.get(f)&&(e=E.get(f));else return b;a=q(n(a),"*_[]()");d=q(d,"*_");b='<img src="'+d+'" alt="'+a+'"';e=n(e);e=q(e,"*_");return b+(' title="'+e+'"')+" />"}function A(a){a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"<h1>"+m(b)+"</h1>\n\n"});a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return"<h2>"+m(b)+"</h2>\n\n"});return a=
a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){a=b.length;return"<h"+a+">"+m(c)+"</h"+a+">\n\n"})}function j(a){var a=a+"~0",b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;J?a=a.replace(b,function(a,b,c){a=-1<c.search(/[*+-]/g)?"ul":"ol";b=u(b,a);b=b.replace(/\s+$/,"");return"<"+a+">"+b+"</"+a+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,
c,f){a=-1<f.search(/[*+-]/g)?"ul":"ol";c=u(c,a);return b+"<"+a+">\n"+c+"</"+a+">\n"}));return a=a.replace(/~0/,"")}function u(a,b){J++;var a=a.replace(/\n{2,}$/,"\n"),c=O[b],f=!1,a=(a+"~0").replace(RegExp("(^[ \\t]*)("+c+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+c+")[ \\t]+))","gm"),function(a,b,c,d){a=d;(b=/\n\n$/.test(a))||-1<a.search(/\n{2,}/)||f?a=i(I(a),!0):(a=j(I(a)),a=a.replace(/\n$/,""),a=m(a));f=b;return"<li>"+a+"</li>\n"}),a=a.replace(/~0/g,"");J--;return a}function C(b){b=(b+"~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,
function(b,c,f){b=a(I(c));b=K(b);b=b.replace(/^\n+/g,"");b=b.replace(/\n+$/g,"");return"\n\n"+("<pre><code>"+b+"\n</code></pre>")+"\n\n"+f});return b=b.replace(/~0/,"")}function e(a){a=a.replace(/(^\n+|\n+$)/g,"");return"\n\n~K"+(B.push(a)-1)+"K\n\n"}function d(b){return b=b.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(b,c,f,d){b=d.replace(/^([ \t]*)/g,"");b=b.replace(/[ \t]*$/g,"");b=a(b);b=b.replace(/:\/\//g,"~P");return c+"<code>"+b+"</code>"})}function a(a){a=a.replace(/&/g,"&amp;");
a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return a=q(a,"*_{}[]\\",!1)}function b(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c;c=b.replace(/^[ \t]*>[ \t]?/gm,"~0");c=c.replace(/~0/g,"");c=c.replace(/^[ \t]+$/gm,"");c=i(c);c=c.replace(/(^|\n)/g,"$1  ");c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c;c=b.replace(/^  /mg,"~0");return c=c.replace(/~0/g,"")});return e("<blockquote>\n"+c+"\n</blockquote>")})}function c(a,b){for(var a=a.replace(/^\n+/g,
""),a=a.replace(/\n+$/g,""),c=a.split(/\n{2,}/g),f=[],d=/~K(\d+)K/,l=c.length,e=0;e<l;e++){var x=c[e];d.test(x)?f.push(x):/\S/.test(x)&&(x=m(x),x=x.replace(/^([ \t]*)/g,"<p>"),x+="</p>",f.push(x))}if(!b){l=f.length;for(e=0;e<l;e++)for(var q=!0;q;)q=!1,f[e]=f[e].replace(/~K(\d+)K/g,function(a,b){q=!0;return B[b]})}return f.join("\n\n")}function f(a){a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;");return a=a.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function x(a,b,c,f){if(b)return a;if(")"!==
f.charAt(f.length-1))return"<"+c+f+">";for(var a=f.match(/[()]/g),d=b=0;d<a.length;d++)"("===a[d]?0>=b?b=1:b++:b--;var l="";0>b&&(f=f.replace(RegExp("\\){1,"+-b+"}$"),function(a){l=a;return""}));return"<"+c+f+">"+l}function H(a){a=a.replace(/(="|<)?\b(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\])])(?=$|\W)/gi,x);return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,function(a,b){return'<a href="'+b+'">'+w.plainLinkText(b)+"</a>"})}function F(a){return a=a.replace(/~E(\d+)E/g,
function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function I(a){a=a.replace(/^(\t|[ ]{1,4})/gm,"~0");return a=a.replace(/~0/g,"")}function K(a){if(!/\t/.test(a))return a;var b=["    ","   ","  "," "],c=0,f;return a.replace(/[\n\t]/g,function(a,d){if("\n"===a)return c=d+1,a;f=(d-c)%4;c=d+1;return b[f]})}function l(a){if(!a)return"";var b=a.length;return a.replace(D,function(c,f){return"~D"==c?"%24":":"==c&&(f==b-1||/[0-9\/]/.test(a.charAt(f+1)))?":":"%"+c.charCodeAt(0).toString(16)})}
function q(a,b,c){b="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(b="\\\\"+b);return a=a.replace(RegExp(b,"g"),z)}function z(a,b){return"~E"+b.charCodeAt(0)+"E"}var w=this.hooks=new o;w.addNoop("plainLinkText");w.addNoop("preConversion");w.addNoop("postNormalization");w.addNoop("preBlockGamut");w.addNoop("postBlockGamut");w.addNoop("preSpanGamut");w.addNoop("postSpanGamut");w.addNoop("postConversion");var G,E,B,J;this.makeHtml=function(a){if(G)throw Error("Recursive call to converter.makeHtml");G=
new r;E=new r;B=[];J=0;a=w.preConversion(a);a=a.replace(/~/g,"~T");a=a.replace(/\$/g,"~D");a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=K("\n\n"+a+"\n\n");a=a.replace(/^[ \t]+$/mg,"");a=w.postNormalization(a);a=k(a);a=g(a);a=i(a);a=F(a);a=a.replace(/~D/g,"$$");a=a.replace(/~T/g,"~");a=w.postConversion(a);B=E=G=null;return a};var M=function(a){return i(a)},O={ol:"\\d+[.]",ul:"[*+-]"},D=/(?:["'*()[\]:]|~D)/g}})();
(function(){var i,p,o;function r(){}function g(a){this.buttonBar=j.getElementById("wmd-button-bar"+a);this.preview=j.getElementById("wmd-preview"+a);this.input=j.getElementById("wmd-input"+a)}function k(a,b){var c=this,f=[],d=0,e="none",F,j,g,l=function(a,b){e!=a&&(e=a,b||z());!i||"moving"!=e?j=setTimeout(q,1):g=null},q=function(a){g=new h(b,a);j=void 0};this.setCommandMode=function(){e="command";z();j=setTimeout(q,0)};this.canUndo=function(){return 1<d};this.canRedo=function(){return f[d+1]?!0:!1};
this.undo=function(){c.canUndo()&&(F?(F.restore(),F=null):(f[d]=new h(b),f[--d].restore(),a&&a()));e="none";b.input.focus();q()};this.redo=function(){c.canRedo()&&(f[++d].restore(),a&&a());e="none";b.input.focus();q()};var z=function(){var c=g||new h(b);if(!c)return!1;"moving"==e?F||(F=c):(F&&(f[d-1].text!=F.text&&(f[d++]=F),F=null),f[d++]=c,f[d+1]=null,a&&a())},w=function(a){var b=!1;if((a.ctrlKey||a.metaKey)&&!a.altKey)switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "y":c.redo();
b=!0;break;case "z":a.shiftKey?c.redo():c.undo(),b=!0}b&&(a.preventDefault&&a.preventDefault(),window.event&&(window.event.returnValue=!1))},k=function(a){!a.ctrlKey&&!a.metaKey&&(a=a.keyCode,33<=a&&40>=a||63232<=a&&63235>=a?l("moving"):8==a||46==a||127==a?l("deleting"):13==a?l("newlines"):27==a?l("escape"):(16>a||20<a)&&91!=a&&l("typing"))};(function(){n.addEvent(b.input,"keypress",function(a){(a.ctrlKey||a.metaKey)&&!a.altKey&&(89==a.keyCode||90==a.keyCode)&&a.preventDefault()});var a=function(){if((i||
g&&g.text!=b.input.value)&&void 0==j)e="paste",z(),q()};n.addEvent(b.input,"keydown",w);n.addEvent(b.input,"keydown",k);n.addEvent(b.input,"mousedown",function(){l("moving")});b.input.onpaste=a;b.input.ondrop=a})();q(!0);z()}function h(a,b){var c=this,f=a.input;this.init=function(){if(n.isVisible(f)&&(b||!(j.activeElement&&j.activeElement!==f)))if(this.setInputAreaSelectionStartEnd(),this.scrollTop=f.scrollTop,!this.text&&f.selectionStart||0===f.selectionStart)this.text=f.value};this.setInputAreaSelection=
function(){if(n.isVisible(f))if(void 0!==f.selectionStart&&!p)f.focus(),f.selectionStart=c.start,f.selectionEnd=c.end,f.scrollTop=c.scrollTop;else if(j.selection&&!(j.activeElement&&j.activeElement!==f)){f.focus();var a=f.createTextRange();a.moveStart("character",-f.value.length);a.moveEnd("character",-f.value.length);a.moveEnd("character",c.end);a.moveStart("character",c.start);a.select()}};this.setInputAreaSelectionStartEnd=function(){if(!a.ieCachedRange&&(f.selectionStart||0===f.selectionStart))c.start=
f.selectionStart,c.end=f.selectionEnd;else if(j.selection){c.text=n.fixEolChars(f.value);var b=a.ieCachedRange||j.selection.createRange(),d=n.fixEolChars(b.text),e="\u0007"+d+"\u0007";b.text=e;var h=n.fixEolChars(f.value);b.moveStart("character",-e.length);b.text=d;c.start=h.indexOf("\u0007");c.end=h.lastIndexOf("\u0007")-1;if(e=c.text.length-n.fixEolChars(f.value).length){for(b.moveStart("character",-d.length);e--;)d+="\n",c.end+=1;b.text=d}a.ieCachedRange&&(c.scrollTop=a.ieCachedScrollTop);a.ieCachedRange=
null;this.setInputAreaSelection()}};this.restore=function(){void 0!=c.text&&c.text!=f.value&&(f.value=c.text);this.setInputAreaSelection();f.scrollTop=c.scrollTop};this.getChunks=function(){var a=new r;a.before=n.fixEolChars(c.text.substring(0,c.start));a.startTag="";a.selection=n.fixEolChars(c.text.substring(c.start,c.end));a.endTag="";a.after=n.fixEolChars(c.text.substring(c.end));a.scrollTop=c.scrollTop;return a};this.setChunks=function(a){a.before+=a.startTag;a.after=a.endTag+a.after;this.start=
a.before.length;this.end=a.before.length+a.selection.length;this.text=a.before+a.selection+a.after;this.scrollTop=a.scrollTop};this.init()}function v(a,b,c){var f,d,e,h=function(){var a=0;window.innerHeight?a=window.pageYOffset:j.documentElement&&j.documentElement.scrollTop?a=j.documentElement.scrollTop:j.body&&(a=j.body.scrollTop);return a},g=function(){if(b.preview){var c=b.input.value;if(!(c&&c==e)){e=c;var f=(new Date).getTime(),c=a.makeHtml(c);d=(new Date).getTime()-f;E(c)}}},k=function(){f&&
(clearTimeout(f),f=void 0);var a=0,a=d;3E3<a&&(a=3E3);f=setTimeout(g,a)};this.refresh=function(a){a?(e="",g()):k()};this.processingTime=function(){return d};var l=!0,q=function(a){var c=b.preview,f=c.parentNode,d=c.nextSibling;f.removeChild(c);c.innerHTML=a;d?f.insertBefore(c,d):f.appendChild(c)},z=function(a){b.preview.innerHTML=a},w,m=function(a){if(w)return w(a);try{z(a),w=z}catch(b){w=q,w(a)}},E=function(a){var f=s.getTop(b.input)-h();b.preview&&(m(a),c());b.preview&&(b.preview.scrollTop=(b.preview.scrollHeight-
b.preview.clientHeight)*(b.preview.scrollHeight<=b.preview.clientHeight?1:b.preview.scrollTop/(b.preview.scrollHeight-b.preview.clientHeight)));if(l)l=!1;else{var d=s.getTop(b.input)-h();i?setTimeout(function(){window.scrollBy(0,d-f)},0):window.scrollBy(0,d-f)}};(function(a,b){n.addEvent(a,"input",b);a.onpaste=b;a.ondrop=b;n.addEvent(a,"keypress",b);n.addEvent(a,"keydown",b)})(b.input,k);g();b.preview&&(b.preview.scrollTop=0)}function m(a,b,c,f,d,e,g){var k,m,l,q,z,w,G,E,B,t,o,r;function D(a){u.focus();
if(a.textOp){c&&c.setCommandMode();var d=new h(b);if(!d)return;var e=d.getChunks(),l=function(){u.focus();e&&d.setChunks(e);d.restore();f.refresh()};a.textOp(e,l)||l()}a.execute&&a.execute(c)}function v(a,c){var f=a.getElementsByTagName("span")[0];c?(f.style.backgroundPosition=a.XShift+" 0px",a.onmouseover=function(){f.style.backgroundPosition=this.XShift+" -40px"},a.onmouseout=function(){f.style.backgroundPosition=this.XShift+" 0px"},i&&(a.onmousedown=function(){j.activeElement&&j.activeElement!==
b.input||(b.ieCachedRange=document.selection.createRange(),b.ieCachedScrollTop=b.input.scrollTop)}),a.isHelp||(a.onclick=function(){if(this.onmouseout)this.onmouseout();D(this);return!1})):(f.style.backgroundPosition=a.XShift+" -20px",a.onmouseover=a.onmouseout=a.onclick=function(){})}function s(a){"string"===typeof a&&(a=d[a]);return function(){a.apply(d,arguments)}}function y(){c&&(v(o,c.canUndo()),v(r,c.canRedo()))}var u=b.input;k=void 0;m=void 0;l=void 0;q=void 0;z=void 0;w=void 0;G=void 0;E=
void 0;B=void 0;t=void 0;o=void 0;r=void 0;(function(){var c=b.buttonBar,f=document.createElement("ul");f.id="wmd-button-row"+a;f.className="wmd-button-row";var f=c.appendChild(f),d=0,c=function(b,c,e,l){var q=document.createElement("li");q.className="wmd-button";q.style.left=d+"px";d+=25;var x=document.createElement("span");q.id=b+a;q.appendChild(x);q.title=c;q.XShift=e;l&&(q.textOp=l);v(q,!0);f.appendChild(q);return q},x=function(b){var c=document.createElement("li");c.className="wmd-spacer wmd-spacer"+
b;c.id="wmd-spacer"+b+a;f.appendChild(c);d+=25};k=c("wmd-bold-button",g("bold"),"0px",s("doBold"));m=c("wmd-italic-button",g("italic"),"-20px",s("doItalic"));x(1);l=c("wmd-link-button",g("link"),"-40px",s(function(a,b){return this.doLinkOrImage(a,b,!1)}));q=c("wmd-quote-button",g("quote"),"-60px",s("doBlockquote"));z=c("wmd-code-button",g("code"),"-80px",s("doCode"));w=c("wmd-image-button",g("image"),"-100px",s(function(a,b){return this.doLinkOrImage(a,b,!0)}));x(2);G=c("wmd-olist-button",g("olist"),
"-120px",s(function(a,b){this.doList(a,b,!0)}));E=c("wmd-ulist-button",g("ulist"),"-140px",s(function(a,b){this.doList(a,b,!1)}));B=c("wmd-heading-button",g("heading"),"-160px",s("doHeading"));t=c("wmd-hr-button",g("hr"),"-180px",s("doHorizontalRule"));x(3);o=c("wmd-undo-button",g("undo"),"-200px",null);o.execute=function(a){a&&a.undo()};x=/win/.test(C.platform.toLowerCase())?g("redo"):g("redomac");r=c("wmd-redo-button",x,"-220px",null);r.execute=function(a){a&&a.redo()};e&&(c=document.createElement("li"),
x=document.createElement("span"),c.appendChild(x),c.className="wmd-button wmd-help-button",c.id="wmd-help-button"+a,c.XShift="-240px",c.isHelp=!0,c.style.right="0px",c.title=g("help"),c.onclick=e.handler,v(c,!0),f.appendChild(c));y()})();var L="keydown";p&&(L="keypress");n.addEvent(u,L,function(a){if((a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey){switch(String.fromCharCode(a.charCode||a.keyCode).toLowerCase()){case "b":D(k);break;case "i":D(m);break;case "l":D(l);break;case "q":D(q);break;case "k":D(z);
break;case "g":D(w);break;case "o":D(G);break;case "u":D(E);break;case "h":D(B);break;case "r":D(t);break;case "y":D(r);break;case "z":a.shiftKey?D(r):D(o);break;default:return}a.preventDefault&&a.preventDefault();window.event&&(window.event.returnValue=!1)}});n.addEvent(u,"keyup",function(a){if(a.shiftKey&&!a.ctrlKey&&!a.metaKey&&13===(a.charCode||a.keyCode))a={},a.textOp=s("doAutoindent"),D(a)});i&&n.addEvent(u,"keydown",function(a){if(27===a.keyCode)return!1});this.setUndoRedoButtonStates=y}function t(a,
b){this.hooks=a;this.getString=b}function y(a){return a.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(a,c,f){c=c.replace(/\?.*$/,function(a){return a.replace(/\+/g," ")});c=decodeURIComponent(c);c=encodeURI(c).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29");c=c.replace(/\?.*$/,function(a){return a.replace(/\+/g,"%2b")});f&&(f=f.trim?f.trim():f.replace(/^\s*/,"").replace(/\s*$/,""),f=f.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,
"&gt;"));return f?c+' "'+f+'"':c})}var n={},s={},A={},j=window.document,u=window.RegExp,C=window.navigator;i=/msie/.test(C.userAgent.toLowerCase());o=/msie 6/.test(C.userAgent.toLowerCase())||/msie 5/.test(C.userAgent.toLowerCase());p=/opera/.test(C.userAgent.toLowerCase());var e={bold:"Strong <strong> Ctrl+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',
quote:"Blockquote <blockquote> Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl+K",codeexample:"enter code here",image:"Image <img> Ctrl+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:"Numbered List <ol> Ctrl+O",ulist:"Bulleted List <ul> Ctrl+U",litem:"List item",
heading:"Heading <h1>/<h2> Ctrl+H",headingexample:"Heading",hr:"Horizontal Rule <hr> Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",help:"Markdown Editing Help"};Markdown.Editor=function(a,b,c){c=c||{};"function"===typeof c.handler&&(c={helpButton:c});c.strings=c.strings||{};c.helpButton&&(c.strings.help=c.strings.help||c.helpButton.title);var f=function(a){return c.strings[a]||e[a]},b=b||"",d=this.hooks=new Markdown.HookCollection;d.addNoop("onPreviewRefresh");d.addNoop("postBlockquoteCreation");
d.addFalse("insertImageDialog");this.getConverter=function(){return a};var h=this,i;this.run=function(){if(!i){i=new g(b);var e=new t(d,f),n=new v(a,i,function(){d.onPreviewRefresh()}),l,q;/\?noundo/.test(j.location.href)||(l=new k(function(){n.refresh();q&&q.setUndoRedoButtonStates()},i),this.textOperation=function(a){l.setCommandMode();a();h.refreshPreview()});q=new m(b,i,l,n,e,c.helpButton,f);q.setUndoRedoButtonStates();(h.refreshPreview=function(){n.refresh(!0)})()}}};r.prototype.findTags=function(a,
b){var c=this,f;a&&(f=n.extendRegExp(a,"","$"),this.before=this.before.replace(f,function(a){c.startTag+=a;return""}),f=n.extendRegExp(a,"^",""),this.selection=this.selection.replace(f,function(a){c.startTag+=a;return""}));b&&(f=n.extendRegExp(b,"","$"),this.selection=this.selection.replace(f,function(a){c.endTag=a+c.endTag;return""}),f=n.extendRegExp(b,"^",""),this.after=this.after.replace(f,function(a){c.endTag=a+c.endTag;return""}))};r.prototype.trimWhitespace=function(a){var b,c=this;a?a=b="":
(a=function(a){c.before+=a;return""},b=function(a){c.after=a+c.after;return""});this.selection=this.selection.replace(/^(\s*)/,a).replace(/(\s*)$/,b)};r.prototype.skipLines=function(a,b,c){void 0===a&&(a=1);void 0===b&&(b=1);a++;b++;var d,e;navigator.userAgent.match(/Chrome/)&&"X".match(/()./);this.selection=this.selection.replace(/(^\n*)/,"");this.startTag+=u.$1;this.selection=this.selection.replace(/(\n*$)/,"");this.endTag+=u.$1;this.startTag=this.startTag.replace(/(^\n*)/,"");this.before+=u.$1;
this.endTag=this.endTag.replace(/(\n*$)/,"");this.after+=u.$1;if(this.before){for(d=e="";a--;)d+="\\n?",e+="\n";c&&(d="\\n*");this.before=this.before.replace(new u(d+"$",""),e)}if(this.after){for(d=e="";b--;)d+="\\n?",e+="\n";c&&(d="\\n*");this.after=this.after.replace(new u(d,""),e)}};n.isVisible=function(a){if(window.getComputedStyle)return"none"!==window.getComputedStyle(a,null).getPropertyValue("display");if(a.currentStyle)return"none"!==a.currentStyle.display};n.addEvent=function(a,b,c){a.attachEvent?
a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)};n.removeEvent=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)};n.fixEolChars=function(a){a=a.replace(/\r\n/g,"\n");return a=a.replace(/\r/g,"\n")};n.extendRegExp=function(a,b,c){if(null===b||void 0===b)b="";if(null===c||void 0===c)c="";var a=a.toString(),d,a=a.replace(/\/([gim]*)$/,function(a,b){d=b;return""}),a=a.replace(/(^\/|\/$)/g,"");return new u(b+a+c,d)};s.getTop=function(a,b){var c=a.offsetTop;if(!b)for(;a=
a.offsetParent;)c+=a.offsetTop;return c};s.getHeight=function(a){return a.offsetHeight||a.scrollHeight};s.getWidth=function(a){return a.offsetWidth||a.scrollWidth};s.getPageSize=function(){var a,b,c,d;self.innerHeight&&self.scrollMaxY?(a=j.body.scrollWidth,b=self.innerHeight+self.scrollMaxY):j.body.scrollHeight>j.body.offsetHeight?(a=j.body.scrollWidth,b=j.body.scrollHeight):(a=j.body.offsetWidth,b=j.body.offsetHeight);self.innerHeight?(c=self.innerWidth,d=self.innerHeight):j.documentElement&&j.documentElement.clientHeight?
(c=j.documentElement.clientWidth,d=j.documentElement.clientHeight):j.body&&(c=j.body.clientWidth,d=j.body.clientHeight);a=Math.max(a,c);b=Math.max(b,d);return[a,b,c,d]};A.createBackground=function(){var a=j.createElement("div"),b=a.style;a.className="wmd-prompt-background";b.position="absolute";b.top="0";b.zIndex="1000";i?b.filter="alpha(opacity=50)":b.opacity="0.5";var c=s.getPageSize();b.height=c[1]+"px";i?(b.left=j.documentElement.scrollLeft,b.width=j.documentElement.clientWidth):(b.left="0",b.width=
"100%");j.body.appendChild(a);return a};A.prompt=function(a,b,c){var d,e;void 0===b&&(b="");var g=function(a){27===(a.charCode||a.keyCode)&&h(!0)},h=function(a){n.removeEvent(j.body,"keydown",g);var b=e.value;a?b=null:(b=b.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(b)||(b="http://"+b));d.parentNode.removeChild(d);c(b);return!1},k=function(){d=j.createElement("div");d.className="wmd-prompt-dialog";d.style.padding="10px;";d.style.position="fixed";d.style.width="400px";
d.style.zIndex="1001";var c=j.createElement("div");c.innerHTML=a;c.style.padding="5px";d.appendChild(c);var c=j.createElement("form"),l=c.style;c.onsubmit=function(){return h(!1)};l.padding="0";l.margin="0";l.cssFloat="left";l.width="100%";l.textAlign="center";l.position="relative";d.appendChild(c);e=j.createElement("input");e.type="text";e.value=b;l=e.style;l.display="block";l.width="80%";l.marginLeft=l.marginRight="auto";c.appendChild(e);var q=j.createElement("input");q.type="button";q.onclick=
function(){return h(!1)};q.value="OK";l=q.style;l.margin="10px";l.display="inline";l.width="7em";var z=j.createElement("input");z.type="button";z.onclick=function(){return h(!0)};z.value="Cancel";l=z.style;l.margin="10px";l.display="inline";l.width="7em";c.appendChild(q);c.appendChild(z);n.addEvent(j.body,"keydown",g);d.style.top="50%";d.style.left="50%";d.style.display="block";o&&(d.style.position="absolute",d.style.top=j.documentElement.scrollTop+200+"px",d.style.left="50%");j.body.appendChild(d);
d.style.marginTop=-(s.getHeight(d)/2)+"px";d.style.marginLeft=-(s.getWidth(d)/2)+"px"};setTimeout(function(){k();var a=b.length;if(void 0!==e.selectionStart)e.selectionStart=0,e.selectionEnd=a;else if(e.createTextRange){var c=e.createTextRange();c.collapse(!1);c.moveStart("character",-a);c.moveEnd("character",a);c.select()}e.focus()},0)};var d=t.prototype;d.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)";d.unwrap=function(a){var b=new u("([^\\n])\\n(?!(\\n|"+
this.prefixes+"))","g");a.selection=a.selection.replace(b,"$1 $2")};d.wrap=function(a,b){this.unwrap(a);var c=new u("(.{1,"+b+"})( +|$\\n?)","gm"),d=this;a.selection=a.selection.replace(c,function(a,b){return(new u("^"+d.prefixes,"")).test(a)?a:b+"\n"});a.selection=a.selection.replace(/\s+$/,"")};d.doBold=function(a,b){return this.doBorI(a,b,2,this.getString("boldexample"))};d.doItalic=function(a,b){return this.doBorI(a,b,1,this.getString("italicexample"))};d.doBorI=function(a,b,c,d){a.trimWhitespace();
a.selection=a.selection.replace(/\n{2,}/g,"\n");var e=/(\**$)/.exec(a.before)[0],b=/(^\**)/.exec(a.after)[0],e=Math.min(e.length,b.length);e>=c&&(2!=e||1!=c)?(a.before=a.before.replace(u("[*]{"+c+"}$",""),""),a.after=a.after.replace(u("^[*]{"+c+"}",""),"")):!a.selection&&b?(a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,""),a.before=a.before+b+u.$1):(!a.selection&&!b&&(a.selection=d),c=1>=c?"*":"**",a.before+=c,a.after=c+a.after)};d.stripLinkDefs=function(a,b){return a=
a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,d,e,g,h){b[d]=a.replace(/\s*$/,"");return g?(b[d]=a.replace(/["(](.+?)[")]$/,""),g+h):""})};d.addLinkDef=function(a,b){var c=0,d={};a.before=this.stripLinkDefs(a.before,d);a.selection=this.stripLinkDefs(a.selection,d);a.after=this.stripLinkDefs(a.after,d);var e="",g=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,h=function(a){c++;a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,
"  ["+c+"]:");e+="\n"+a},j=function(a,b,e,k,m,i){e=e.replace(g,j);return d[m]?(h(d[m]),b+e+k+c+i):a};a.before=a.before.replace(g,j);b?h(b):a.selection=a.selection.replace(g,j);var k=c;a.after=a.after.replace(g,j);a.after&&(a.after=a.after.replace(/\n*$/,""));a.after||(a.selection=a.selection.replace(/\n*$/,""));a.after+="\n\n"+e;return k};d.doLinkOrImage=function(a,b,c){a.trimWhitespace();a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var d;if(1<a.endTag.length&&0<a.startTag.length)a.startTag=
a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null);else if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))this.addLinkDef(a,null);else{var e=this,g=function(g){d.parentNode.removeChild(d);null!==g&&(a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),g=" [999]: "+y(g),g=e.addLinkDef(a,g),a.startTag=c?"![":"[",a.endTag="]["+g+"]",a.selection||(a.selection=c?e.getString("imagedescription"):e.getString("linkdescription")));
b()};d=A.createBackground();c?this.hooks.insertImageDialog(g)||A.prompt(this.getString("imagedialog"),"http://",g):A.prompt(this.getString("linkdialog"),"http://",g);return!0}};d.doAutoindent=function(a){var b=!1;a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n");a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n");!a.selection&&!/^[ \t]*(?:\n|$)/.test(a.after)&&(a.after=a.after.replace(/^[^\n]*/,function(b){a.selection=
b;return""}),b=!0);/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(a.before)&&this.doList&&this.doList(a);/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&this.doBlockquote&&this.doBlockquote(a);/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&this.doCode&&this.doCode(a);b&&(a.after=a.selection+a.after,a.selection="")};d.doBlockquote=function(a){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(b,c,d,e){a.before+=c;a.after=e+a.after;return d});a.before=a.before.replace(/(>[ \t]*)$/,function(b,
c){a.selection=c+a.selection;return""});a.selection=a.selection.replace(/^(\s|>)+$/,"");a.selection=a.selection||this.getString("quoteexample");var b="",c="",d;if(a.before){for(var e=a.before.replace(/\n$/,"").split("\n"),g=!1,h=0;h<e.length;h++){var j=!1;d=e[h];g=g&&0<d.length;/^>/.test(d)?(j=!0,!g&&1<d.length&&(g=!0)):j=/^[ \t]*$/.test(d)?!0:g;j?b+=d+"\n":(c+=b+d,b="\n")}/(^|\n)>/.test(b)||(c+=b,b="")}a.startTag=b;a.before=c;a.after&&(a.after=a.after.replace(/^\n?/,"\n"));a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,
function(b){a.endTag=b;return""});b=function(b){var c=b?"> ":"";a.startTag&&(a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}));a.endTag&&(a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}))};/^(?![ ]{0,3}>)/m.test(a.selection)?(this.wrap(a,70),a.selection=a.selection.replace(/^/gm,"> "),b(!0),a.skipLines()):(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(a),
b(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag&&(a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n")));a.selection=this.hooks.postBlockquoteCreation(a.selection);/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,c){a.startTag+=c;return""}))};d.doCode=function(a){var b=/\S[ ]*$/.test(a.before);if(!/^[ ]*\S/.test(a.after)&&!b||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,
function(b){a.selection=b+a.selection;return""});var c=b=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&(b=0);/^\n(\t|[ ]{4,})/.test(a.after)&&(c=0);a.skipLines(b,c);a.selection?/^[ ]{0,3}\S/m.test(a.selection)?/\n/.test(a.selection)?a.selection=a.selection.replace(/^/gm,"    "):a.before+="    ":a.selection=a.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(a.startTag="    ",a.selection=this.getString("codeexample"))}else a.trimWhitespace(),a.findTags(/`/,/`/),!a.startTag&&!a.endTag?(a.startTag=a.endTag=
"`",a.selection||(a.selection=this.getString("codeexample"))):a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag=""};d.doList=function(a,b,c){var b=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,d="-",e=1,g=function(){var a;c?(a=" "+e+". ",e++):a=" "+d+" ";return a},h=function(a){void 0===c&&(c=/^\s*\d/.test(a));return a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(){return g()})};a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,
null);a.before&&!/\n$/.test(a.before)&&!/^\n/.test(a.startTag)&&(a.before+=a.startTag,a.startTag="");if(a.startTag){var j=/\d+[.]/.test(a.startTag);a.startTag="";a.selection=a.selection.replace(/\n[ ]{4}/g,"\n");this.unwrap(a);a.skipLines();j&&(a.after=a.after.replace(b,h));if(c==j)return}var k=1;a.before=a.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(a){/^\s*([*+-])/.test(a)&&(d=u.$1);k=/[^\n]\n\n[^\n]/.test(a)?1:0;
return h(a)});a.selection||(a.selection=this.getString("litem"));var j=g(),l=1;a.after=a.after.replace(b,function(a){l=/[^\n]\n\n[^\n]/.test(a)?1:0;return h(a)});a.trimWhitespace(!0);a.skipLines(k,l,!0);a.startTag=j;b=j.replace(/./g," ");this.wrap(a,72-b.length);a.selection=a.selection.replace(/\n/g,"\n"+b)};d.doHeading=function(a){a.selection=a.selection.replace(/\s+/g," ");a.selection=a.selection.replace(/(^\s+|\s+$)/g,"");if(a.selection){var b=0;a.findTags(/#+[ ]*/,/[ ]*#+/);/#+/.test(a.startTag)&&
(b=u.lastMatch.length);a.startTag=a.endTag="";a.findTags(null,/\s?(-+|=+)/);/=+/.test(a.endTag)&&(b=1);/-+/.test(a.endTag)&&(b=2);a.startTag=a.endTag="";a.skipLines(1,1);b=0==b?2:b-1;if(0<b){var b=2<=b?"-":"=",c=a.selection.length;72<c&&(c=72);for(a.endTag="\n";c--;)a.endTag+=b}}else a.startTag="## ",a.selection=this.getString("headingexample"),a.endTag=" ##"};d.doHorizontalRule=function(a){a.startTag="----------\n";a.selection="";a.skipLines(2,1,!0)}})();
(function(){function i(){for(var a=0;a<u.length;a++)u[a].refreshPreview()}function p(a){var b=a.match(/^\s*>\s*!/mg);if(b&&b.length==a.split("\n").length){var c=!1,a=a.replace(/(.*) (\w)/,function(a,b,d){c=!0;return b+"\n> "+d});c||(a=a.replace(/^(\s*>\s*)!/m,"$1&#33;"))}return a}function o(a){var b=/^\s*?[^\s!]/m,c=/^\s*?!/gm;return a=a.replace(/\<blockquote\>[\n\s]*?\<p\>[\n\s]*?(![\s\S]*?)\<\/p\>[\n\s]*?\<\/blockquote\>/g,function(a,d){if(b.test(d))return a;a=a.replace(d,d.replace(c,""));return a=
a.replace("<blockquote>",'<blockquote class="spoiler">')})}function r(a){if(!window.tagRendererRaw)return a;var b,c;return a=a.replace(/\[(meta-)?tag:([a-z0-9#+.-]+)\]/gi,function(d,e,f,g){if(!j&&e)return d;if(!b){for(var h=a,k=[],m=/<(a|code)[^>]*>/ig,i;null!=(i=m.exec(h));){k.push(i.index);i=RegExp("</"+i[1]+">","ig");i.lastIndex=m.lastIndex;if(null==i.exec(h))break;k.push(i.lastIndex);m.lastIndex=i.lastIndex}b=k;c=b.length}h=!1;for(k=0;k<c&&!(b[k]>g);k++)h=!h;if(h)return d;d=null;j&&!e&&(d=A);
return tagRendererRaw(sanitizeAndSplitTags(f)[0],d)})}function g(a){var b,c;"undefined"==typeof d&&(d=StackExchange.options.styleCode);d&&(b=m(a),c=m(b+a),a=y(a,b,c));a=k(a);d&&(a=n(a,b,c));return a}function k(a){return a.replace(/<[^>]*>?/gi,h)}function h(d){return d.match(a)||d.match(b)||d.match(c)?d:""}function v(a){if(""==a)return"";var b=/<\/?\w+[^>]*(\s|$|>)/g,c=a.toLowerCase().match(b),d=(c||[]).length;if(0==d)return a;for(var e,f,g,h=[],j=[],k=!1,i=0;i<d;i++)if(e=c[i].replace(/<\/?(\w+).*/,
"$1"),!(h[i]||-1<"<p><img><br><li><hr>".search("<"+e+">"))){f=c[i];g=-1;if(!/^<\//.test(f))for(f=i+1;f<d;f++)if(!h[f]&&c[f]=="</"+e+">"){g=f;break}-1==g?k=j[i]=!0:h[g]=!0}if(!k)return a;i=0;return a=a.replace(b,function(a){a=j[i]?"":a;i++;return a})}function m(a){a=(a.match(/~/g)||[]).length;return Array(a+2).join("~")}function t(a){if(/^lang-/.test(a))return a;var b="c_"+a,c=f[b];if(c)return c;if(x[b])return null;x[b]=!0;b=H.length;0<b&&RegExp("^"+H[b-1]).test(a)?H[b-1]=a:H.push(a);F.trigger();return null}
function y(a,b,c){a=a.replace(I,function(a,c,d){return b+c+b+d});return a.replace(K,function(a,b){return c+b+c})}function n(a,b,c){var a=a.replace(RegExp(b+"([a-z0-9#+.-]+)"+b+"(\\s*?<pre)","gi"),function(a,b,c){a=t(b);return!a?c:c+" class='"+a+" prettyprint-override'"}),d;return a.replace(RegExp("("+c+"([a-z0-9#+.-]+)"+c+")|(<pre><code>)","gi"),function(a,b,c){if(b)return d=c,"";if(!d)return a;b=t(d);return!b?a:"<pre class='"+b+" prettyprint-override'><code>"})}function s(a){function b(){e.animate({height:f.height()-
g})}function c(a){if(f)a();else if(!k){k=!0;var d=m.offset();g=d.top-$("#wmd-button-row"+i).offset().top-$("#wmd-button-row"+i).outerHeight()-5;h=$("#wmd-help-button"+i);var l=h.offset().left+h.outerWidth(),d=d.left,n=m.outerWidth()+d,n=Math.max(l,n);j={right:l-n,width:n-d,top:$("#wmd-button-row"+i).outerHeight()+5};h.addClass("active-help");e=$("<div style='clear:both' />").insertBefore(m);f=$('<div id="mdhelp'+i+'" class="mdhelp"><ul id="mdhelp-tabs'+i+'" class="mdhelp-tabs"><li /></ul></div>').find("li").addSpinner().end().css(j).insertAfter(h);
b();$.get("/posts/markdown-help",{postfix:i}).done(function(c){f.remove();f=$(c).insertAfter(h).css(j);$("#mdhelp-tabs"+i).delegate("li:not(:last-child)","click",function(){var a=$(this).hasClass("selected");f.find(".mdhelp-tab").hide();$("#mdhelp-tabs"+i+" li").removeClass("selected");if(!a&&($("#"+$(this).attr("data-tab")).show(),$(this).addClass("selected"),a=$(this).attr("data-buttons")))for(var a=a.split(","),c=0;c<a.length;c++){var d=$("#wmd-"+a[c]+"-button"+i);d.is(":animated")||d.animate({top:-15},
400).animate({top:0},400).animate({top:-8},300).animate({top:0},300).animate({top:-4},200).animate({top:0},200).animate({top:-2},100).animate({top:0},100).animate({top:-1},50).animate({top:0},50)}b()});k=!1;a()})}}function d(){n=!0;c(function(){h.addClass("active-help");f.show();b()})}var e,f,g,h,j,k=!1,i=(a||{}).postfix||"",m=$("#wmd-input"+i),n=!1;this.toggle=function(){f&&f.is(":visible")?(f.hide(),e.animate({height:0}),h.removeClass("active-help")):d()};this.showOnce=function(){n||d()}}if(!StackExchange.MarkdownEditor){var A,
j,u=[],C=function(a){function b(a){return"facebook.stackoverflow.com"===a?"stackoverflow.com":a}function c(b){window.apiCallbacks[b]||(window.apiCallbacks[b]=function(c){if(c)if(c.error_message)/^No site found/.test(c.error_message)&&(m["s_"+b]=!0);else if(c.items){for(var c=c.items,d=c.length,e=0;e<d;e++){var f=c[e];h[b+"|"+f.question_id]=f.title}a&&a()}});return'apiCallbacks["'+b+'"]'}function d(a,c){if(b(a)===g)return!0;var e=n[a];e||(e=n[a]={count:0,ids:{}});if(e.ids[c])return!0;if(e.count>=p)return!1;
e.count++;return e.ids[c]=!0}var e=/<a href="((\S+)\/q(?:uestions)?\/(\d+)(?:|\/\S*?))">\1<\/a>/g,f=window.location.hostname.toLowerCase(),g=b(f),h={},i={},j={},k=StackExchange.helpers.DelayedReaction(function(){var a=!1,d;for(d in j)if(j.hasOwnProperty(d)){var e=c(d),f;30<j[d].length?f=j[d].splice(0,30).join(";"):(f=j[d].join(";"),delete j[d]);a=!0;$.ajax({url:"http://api.stackexchange.com/2.0/questions/"+f+"?pagesize=30&key=6AU78DZ)GcdjNjAszYmTLQ((&filter=!6G7RPxWUNTleV&site="+b(d),crossDomain:!0,
jsonpCallback:e,dataType:"jsonp"});break}a&&k.trigger()},1E3,{sliding:!0}),m={};window.apiCallbacks={};var n={},p=/^meta\./.test(g)?40:10;return function(a){n={};return a.replace(e,function(a,c,e,f){e=e.toLowerCase().replace(/^http:\/\//,"");if(/[^a-z0-9.]/.test(e)||!d(e,f))return a;var l=h[e+"|"+f];if(l)f=l;else{if(l=!i[e+"|"+f]){l=b(e);if(l===g)l=!1;else if(m["s_"+l])l=!0;else var n=/^meta\./.test(g),l=g==="meta."+l||!n&&"meta."+g===l||n&&"meta.stackoverflow.com"==l||"meta.stackoverflow.com"===
g?!1:!0;l=!l}l&&(i[e+"|"+f]=!0,(l=j[e])||(l=j[e]=[]),l.push(f),k.trigger());f=null}return!f?a:'<a href="'+c+'">'+f+"</a>"})}}(i),e=$.Callbacks();StackExchange.MarkdownEditor=function(a){var b=a.postfix||"";A=$("#hlinks a").filter(function(){return"main"==$(this).text()}).attr("href");j=!!A;var c=new Markdown.Converter,d=c.hooks;d.addNoop("preSafe");d.chain("postConversion",C);d.chain("postConversion",function(a){return d.preSafe(a)});d.chain("postConversion",g);d.chain("postConversion",v);d.chain("postConversion",
o);d.chain("postConversion",r);var f=new s({postfix:b}),h={helpButton:{handler:f.toggle}};a.noCode&&(h.strings={code:"Preformatted text <pre><code> Ctrl-K",codeexample:"enter preformatted text here"});c=new Markdown.Editor(c,b,h);c.hooks.chain("postBlockquoteCreation",p);StackExchange.options.disableImageUploads||c.hooks.set("insertImageDialog",StackExchange.imageUploader.uploadImageDialog);e.fire(c,a.postfix);var i=$("#wmd-preview"+b);c.hooks.chain("onPreviewRefresh",function(){i.trigger("wmdrefresh")});
u.push(c);c.run();if(a.immediatelyShowMarkdownHelp)f.showOnce(a);else if(a.autoShowMarkdownHelp)$("#wmd-input"+b).one("focus",function(){f.showOnce(a)});c.disableSubmission=function(){$("#submit-button"+b).attr("disabled","disabled");StackExchange.navPrevention.stop()};return c};StackExchange.MarkdownEditor.creationCallbacks=e;StackExchange.MarkdownEditor.refreshAllPreviews=i;var d;StackExchange.MarkdownEditor.sanitizeHtml=k;var a=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,
b=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,c=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i;StackExchange.MarkdownEditor.balanceTags=v;var f={},x={},H=[],F=StackExchange.helpers.DelayedReaction(function(){0!=H.length&&($.ajax("/api/tags/"+encodeURIComponent(H.join(";"))+"/syntax-highlight",{cache:!0}).done(function(a){var b=!1,
c;for(c in a)a.hasOwnProperty(c)&&(f["c_"+c]=a[c],b=!0);b&&(StackExchange.MarkdownEditor.refreshAllPreviews(),styleCode())}),H=[])},2E3,{sliding:!0}),I=/<\!-- language: ([a-z0-9#+\-.]+) --\>(\s*?<pre>\s*?<code>)/gi,K=/<\!-- language-all: ([a-z0-9#+\-.]+) --\>/gi}})();
StackExchange.editor=function(){var i=function(i){var i=i||{},o=i.postfix||"",r=i.heartbeatType,g=i.bindNavPrevention,k=$("#post-form"+o),h=$("#wmd-input"+o),v;v=$("#title, #edit-comment, #m-address, .edit-comment");o=v.add(".tag-editor input");k.submit(function(){if(window.postSubmitCallback&&!window.postSubmitCallback())return!1;v.each(function(){StackExchange.helpers.hideHelpOverlay($(this))});StackExchange.helpers.disableSubmitButton(k);StackExchange.navPrevention.stop();return!0});$(".original-question").not(".processed").TextAreaResizer();
h.not(".processed").TextAreaResizer();h.typeWatch({highlight:!1,wait:5E3,captureLength:5,callback:styleCode});var m=new StackExchange.MarkdownEditor(i);if(r){var t=i.discardSelector?$(i.discardSelector):null;StackExchange.cardiologist.addHeart(r,h,m,t)}if("ask"==r||"answer"==r){var y=h.add(o),n=function(){StackExchange.helpers.loadTicks(k);y.unbind("keydown",n);return!0};y.bind("keydown",n)}g&&StackExchange.navPrevention.init(h);k.find(".wmd-preview").click(function(){h.focus()});StackExchange.helpers.bindHelpOverlayEvents(v);
0==$("#ask-page-has-errors").length&&$("#title").is("input")&&$("#title").focus();if(i.oncreated)i.oncreated(m);if(i.discardSelector&&("ask"==r||"answer"==r)){var s=$(i.discardSelector);s.click(function(g){g.preventDefault();confirm("Are you sure you want to discard your draft?")&&($("#title").val(""),$("#question-suggestions").empty(),$("#wmd-input-42").val(""),$("#wmd-preview-42").html(""),$("#answer-from-ask").is(":visible")&&$("#answer-from-ask").is(":checked")&&$("#answer-from-ask").click(),
g=$("#tagnames"),0<g.length&&g[0].func_clear&&g[0].func_clear(),h.val(""),m.refreshPreview(),$.post("/post/discard-draft",{fkey:StackExchange.options.user.fkey,postType:r},function(){$("#draft-saved").hide();$("#draft-discarded").show();var g=null,g=function(){$("#draft-discarded").hide();$("#title").unbind("keypress",g);h.unbind("keypress",g)};$("#title").bind("keypress",g);h.bind("keypress",g)}),s.hide())})}};return{init:i,initIfShown:function(p){var o=(p||{}).postfix||"";0!=$("#wmd-preview"+o).length&&
("-42"!==o||0===$("#answer-from-ask").length)&&0===$("#show-editor-button"+o).length?(i(p),StackExchange.editor.finallyInit||(StackExchange.editor.finallyInit=function(){})):StackExchange.editor.finallyInit=function(){i(p)}}}}();
StackExchange.cardiologist=function(){function i(e){e="number"===typeof e?e:1E3*(t+y);A&&(e=Math.max(e,6E3-((new Date).getTime()-A)));j&&clearTimeout(j);j=setTimeout(p,e)}function p(){j=null;if(!h.length){var e;h=[];k&&!k.isDisabled&&30>k.beatCount&&h.push(k);for(var d=0;d<g.length;d++)e=g[d],e!=k&&!e.isDisabled&&30>e.beatCount&&h.push(e);t=Math.max(15,Math.min(45,60/(h.length||1)))}h.length?(e=h.shift(),e.checkActive()?e.beat():i()):i()}function o(){}function r(e){var d=[];$.get("/questions/"+e,
function(a){a=$(a);a.find("div.answer").each(function(){var a=this.id.substring(7);0==$("#answer-"+a).length&&d.push(this.id)});if(0<d.length){var b="#"+d.join(",#"),a=a.find(b),b=$("div.answer:last");0==b.length&&(b=$("#answers-header"));a.hide();b.after(a);a.fadeIn("slow");b=$("div.answer").length;$(".subheader h2").text(b+" Answer"+(1<b?"s":""));StackExchange.vote.init(e);StackExchange.comments.init({post:a})}StackExchange.notify.close(s);n=!1},"html")}var g=[],k,h=[],v,m,t=45,y=0,n=!1,s=-2,A,
j,u={ask:function(e){if(e.relatedQuestions){var d=$("#how-to-format"),a=e.relatedQuestions!=m;a&&d.hide();d.empty().append("<h4>Similar Questions</h4>"+e.relatedQuestions);a&&showFadingHelpText(d);m=e.relatedQuestions}e.suggestedTags&&StackExchange.tagSuggestions&&StackExchange.tagSuggestions.suggest(e.suggestedTags)},answer:function(e,d){if(e&&!n)if(e.disableEditor)StackExchange.notify.show("This question has been "+e.message+" - no more answers will be accepted.",s),n=!0;else{var a=parseInt(e.message);
0<a&&(StackExchange.notify.show(a+" new answer"+(1==a?" has":"s have")+' been posted - <a id="load-new-answers">load new answers.</a>',s),n=!0,$("#load-new-answers").click(function(){r(d.postId)}))}},edit:function(e){e&&e.message&&StackExchange.notify.getMessageText(s)!=$("<span />").html(e.message).text()&&(StackExchange.notify.close(s),StackExchange.notify.show(e.message,s))}};o.prototype={activate:function(){k=this;this.isActive||(this.isActive=!0,this.beatCount=0,g.push(this),1===g.length&&i())},
checkActive:function(){if(!this.isActive||this.isDisabled)return!1;return!this.jTextarea.closest("body").length?(delete this.jTextarea,this.isDisabled=!0,!1):!0},beat:function(e){var d=this,a={type:"POST",url:"/posts/"+this.postId+"/editor-heartbeat/"+this.type,dataType:"json",data:{}};e||(a.success=function(a){d.success(a)},a.error=function(){d.error()},a.complete=function(){d.complete()});if(this.shouldSendDraft()){var b={text:this.jTextarea.val()};"ask"===this.type&&(b.title=$("#title").val(),
b.tagnames=$("#tagnames").val(),b.answertext=$("#wmd-input-42").val());if(!v||v.heart!==this||v.title!==b.title||v.tagnames!==b.tagnames||v.text!==b.text||v.answertext!==b.answertext)a.data=b,v={heart:this,title:b.title,tagnames:b.tagnames,text:b.text,answertext:b.answertext}}if(e&&!("text"in a.data))return $.Deferred().resolve().promise();this.revisionGuid&&(a.data.clientRevisionGuid=this.revisionGuid);"answer"===this.type&&(e=$("#answers-header .answers-subheader h2").text().replace(/ answers?/i,
"")||"0",a.data.clientCount=e);A=(new Date).getTime();return $.ajax(a).promise()},shouldSendDraft:function(){return"edit"!==this.type&&k===this},success:function(e){u[this.type](e,this);e.disableEditor&&(this.editor.disableSubmission(),this.isDisabled=!0);e.draftSaved&&C(this.jTextarea,this.discardDraftLink);this.beatCount++;y=0},error:function(){$("#draft-saved").hide();k===this&&h.unshift(this);y=(new Date).getTime()%100/10},complete:function(){i()}};var C=function(e,d){var a=$("#draft-saved"),
b=function(){a.text("draft saved").fadeIn("fast")};a.is(":visible")?a.fadeOut("fast",b):b();d&&d.removeClass("dno").show();var c=function(a){if(115!=a.which||!a.ctrlKey||a.shiftKey||a.altKey)e.unbind("keypress",c),$("#draft-saved").fadeOut("fast")};e.bind("keypress",c);$("#draft-discarded").hide()};return{addHeart:function(e,d,a,b){var c=new o,f;c.type=e;c.jTextarea=d;c.discardDraftLink=b;switch(e){case "ask":f=0;break;case "answer":f=location.href.match(/\/questions\/(\d+)/i)[1];break;case "edit":f=
$("#post-id").val()||d.closest(".question, .answer").find(".vote input").val(),e=d.closest(".inline-post"),b=null,0<e.length&&(b=e[0].action.split("/").pop()),b||(b=$("#client-revision-guid").val()),c.revisionGuid=b}c.postId=f;c.editor=a;d.keypress(function(){c.activate()})},ensureDraftSaved:function(e,d){!k||!k.checkActive()?e():k.beat(d).done(e)},beatASAP:function(){i(1)},notifiedOfNewAnswer:function(){n=!0},isHeartBeating:function(){if(null==g)return!1;for(var e=0;e<g.length;e++)if(!0==g[e].checkActive())return!0;
return!1}}}();
StackExchange.navPrevention=function(){var i,p,o=function(){var g=!1;i.each(function(h){g=g||$(this).val()!==p[h]});return g},r=function(g){window.onbeforeunload=g?function(){if(i&&o())return g}:null},g=function(){r("You have started writing or editing a post.")};return{init:function(k){i=k.one("keypress",g);p=[];k.each(function(){p.push($(this).val())})},start:function(){i&&g()},stop:function(){i&&(i.unbind("keypress",g),r(null),i=null)},confirm:function(g){return i&&o()?confirm(g):!0}}}();
(function(i){function p(m){g=i(m.data.el);g.blur();h=m.clientY+document.documentElement.scrollTop;k=g.height()-h;g.css("opacity",0.25);i(document).mousemove(o).mouseup(r);return!1}function o(i){var o=i.clientY+document.documentElement.scrollTop,p=k+o;h>=o&&(p-=5);h=o;p=Math.max(v,p);g.height(p+"px");p<v&&r(i);return!1}function r(){i(document).unbind("mousemove",o).unbind("mouseup",r);g.css("opacity",1);g.focus();k=g=null;h=0}var g,k,h=0,v=32;i.fn.TextAreaResizer=function(){return this.each(function(){g=
i(this).addClass("processed");k=null;i(this).parent().append(i('<div class="grippie"></div>').bind("mousedown",{el:this},p));var h=i("div.grippie",i(this).parent())[0];h.style.marginRight=h.offsetWidth-i(this)[0].offsetWidth+"px"})}})(jQuery);"use strict";
StackExchange.imageUploader=function(){return{uploadImageDialog:function(i,p){return StackExchange.options.site.useNewImageUploader?StackExchange.imageUploader.uploadImageDialog_new(i,p):StackExchange.imageUploader.uploadImageDialog_old(i,p)},uploadImageDialog_old:function(i,p){var o="upload-iframe-"+(new Date).getTime();"undefined"===typeof p&&(p="/upload/image");var r=$("<div style='top: 50%; left: 50%; display: block; padding: 10px; position: fixed; width:400px; z-index:1001' class='wmd-prompt-dialog'><div style='position: absolute; right: 20px; bottom: 5px; font-size: 10px;'>image hosting by <a title='imgur: the simple image sharer' href='http://imgur.com'>imgur.com</a></div><p><b>Insert an image</b></p><p style='padding-top: 10px;'><a href='#' class='wmd-mini-button selected' id='upload-image-button'>from my computer</a><a href='#' class='wmd-mini-button' id='upload-url-button'>from the web</a></p><iframe id='"+
o+"' style='display:none;' src='about:blank' name='"+o+"'/><form action='"+p+"' method='post' enctype='multipart/form-data'><input type='hidden' name='fkey' value='"+StackExchange.options.user.fkey+"' /><div style='position: relative;height: 40px;' id='upload-file-input'><img src='http://i.imgur.com/GKc7H.png' height='15px' width='15px' style='vertical-align:middle;margin-right:6px;'><input type='file' name='filename' id='filename-input' value='browse' style='border:0; vertical-align:middle;'></div><div id='upload-url-input' style='display:none;height:40px;'><input type='input' name='upload-url' value='' style='width: 250px;'></div><p id='upload-message' style='padding-top: 4px; margin:0; line-height: 16px;'></p><div class='ac_loading' id='image-upload-progress' style='background-color: transparent; display:none;'>Uploading ...</div><input type='submit' value='Upload' style='width: 7em; margin: 10px;'><input type='button' value='Cancel' id='close-dialog-button' style='width: 7em; margin: 10px 10px 20px;'></form></div>"),
g=function(g){27===(g.charCode||g.keyCode)&&k(null)},k=function(h){$("body").unbind("keydown",g);r.remove();i(void 0==h?null:h);return!1};top.setTimeout(function(){r.appendTo("body");$("#close-dialog-button").click(function(){k()});var h=$("#upload-image-button"),i=$("#upload-url-button"),m=$("#upload-url-input"),p=m.parent(),y=$("#upload-file-input");m.remove().show();var n=function(){$("#upload-message").text("click browse to choose an image from your computer")};n();h.click(function(){i.removeClass("selected");
h.addClass("selected");n();m.remove();p.prepend(y);return!1});i.click(function(){h.removeClass("selected");i.addClass("selected");$("#upload-message").text("paste the URL of your image above");p.prepend(m);m.find("input").focus();y.remove();return!1});h.add(i).keypress(function(g){(13===g.which||32===g.which)&&$(this).click()});$("#"+o);r.find("form").submit(function(){$("#upload-message").hide();$("#image-upload-progress").show();this.target=o;window.closeDialog=k;window.displayUploadError=function(g){$("#image-upload-progress").hide();
$("#upload-message").css({color:"red",fontWeight:"bold"}).show().text(g)};return!0});r.center();$("body").keydown(g);$("#filename-input").focus()},0);return!0},uploadImageDialog_new:function(i,p){var o="upload-iframe-"+(new Date).getTime();"undefined"===typeof p&&(p="/upload/image");var r="";window.Clipboard&&window.FileReader?r="(or paste or drag-and-drop)":window.FileReader&&(r="(or drag-and-drop)");var g=$('<div class="popup" id="image-upload" style="z-index:1001; width: 420px;" tabindex="-1"><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div><iframe id="'+
o+'" style="display:none;" src="about:blank" name="'+o+'"/><form action="'+p+'" id="upload-form" method="post" enctype="multipart/form-data"><input type="hidden" name="fkey" value="'+StackExchange.options.user.fkey+'" /><div><h2 style="margin-bottom: 12px; cursor: move;" class="handle">Add a picture</h2><input type="radio" name="source" id="computer" checked="checked" value="computer" /> <label for="computer">From my computer</label> <input type="file" name="filename" id="filename-input" value="browse" style="float: right; width: 250px;" /><div id="url-wrapper" style="float: right; border: 0; padding: 0; margin: 0; display: none;"><input type="text" name="upload-url" id="upload-url" style="width: 250px;" /><span class="edit-field-overlay">http://example.com/image.png</span></div><br /><input type="radio" name="source" id="web" value="web" /> <label for="web">From the web</label><br /><br />'+
r+'<input type="submit" id="add-picture" value="Add picture" style="float: right;" /></div><p id="upload-message" style="padding-top: 4px; margin:0; line-height: 16px;"></p></form></div><script type="text/javascript">    StackExchange.helpers.bindMovablePopups();    StackExchange.helpers.bindHelpOverlayEvents($("#url-input"));<\/script>'),k,h,v,m=function(d){27===(d.charCode||d.keyCode)&&t(null)},t=function(d){g&&g.fadeOutAndRemove();h&&h.fadeOutAndRemove();$("body").unbind("keydown",m);$("body").unbind("paste");
void 0!==d&&i(d);return!1},y=function(d){t();h=$('<div class="popup" id="image-upload" style="z-index:1001; width: 420px;"><iframe id="'+o+'" style="display:none;" src="about:blank" name="'+o+'"/><div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div><input type="hidden" name="fkey" value="'+StackExchange.options.user.fkey+'" /><div><h2 style="margin-bottom: 12px; cursor: move;" class="handle">Add a picture</h2><img src="'+d+'" style="max-width: 250px;" /><br /><span style="float: right;"><input type="button" id="confirm-upload" value="Confirm" /> <a id="cancel-upload">cancel</a></span</div></form></div>');
e(h)},n=function(d){d=d||window.event;d.preventDefault&&d.preventDefault();k.style.backgroundColor="white";v=d.dataTransfer.files[0];d=new window.FileReader;d.onloadend=s;d.readAsDataURL(v);return!1},s=function(d){y(d.target.result)},A=function(d){d=d.originalEvent||window.event;if(d.clipboardData&&(d=d.clipboardData.items))for(var a=0;a<d.length;a++)if(-1!==d[a].type.indexOf("image")){v=d[a].getAsFile();var b=(window.URL||window.webkitURL).createObjectURL(v);y(b)}},j=function(){return!1},u=function(){return!1},
C=function(){if(window.FormData){var d=new window.FormData;d.append("uploadedImage",v);d.append("fkey",StackExchange.options.user.fkey);$.ajax({url:p,data:d,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(a){$("#"+o).contents().find("html").html(a)}})}},e=function(){h.appendTo("#header").center().fadeIn("fast");$("body").keydown(m);h.find(".popup-close").click(function(){t(null)});$("#cancel-upload").click(function(){t(null)});$("#confirm-upload").click(C);window.closeDialog=t;
window.displayUploadError=function(d){$("#upload-message").css({color:"red",fontWeight:"bold"}).show().text(d)}};g.appendTo("#header").center().fadeIn("fast").promise().done(function(){k=document.getElementById("image-upload");k.ondrop=n;k.ondragover=u;k.ondragleave=j;$("body").bind("paste",A);g.find(".popup-close").click(function(){t(null)});g.find(":radio").change(function(){var d=g.find("#filename-input"),a=g.find("#url-wrapper");d.toggle();a.toggle()});g.find("form").submit(function(){var d=g.find(":radio:checked").val(),
a=g.find("#filename-input"),b=g.find("#url-input");"web"==d?a.remove():b.remove();this.target=o;window.closeDialog=t;window.displayUploadError=function(a){$("#upload-message").css({color:"red",fontWeight:"bold"}).show().text(a)};return!0})});$("body").keydown(m);return!0}}}();
StackExchange.postValidation=function(){function i(e){var d=e.find(y);d.length&&d.blur(function(){var a=d.val(),b=$.trim(a);if(0==b.length)t(d);else{var c=d.data("min-length");c&&b.length<c?m(d,["Title must be at least "+c+" characters."],h()):(c=d.data("max-length"))&&b.length>c?m(d,["Title cannot be longer than "+c+" characters."],h()):$.ajax({type:"POST",url:"/posts/validate-title",data:{title:a},success:function(a){a.success?t(d):m(d,a.errors.Title,h())},error:function(){t(d)}})}})}function p(e,
d,a){var b=e.find(n);b.length&&b.blur(function(){var c=b.val(),e=$.trim(c);0==e.length?t(b):5==d?(c=b.data("min-length"))&&e.length<c?m(b,["Wiki Body must be at least "+c+" characters. You entered "+e.length+"."],h()):t(b):(1==d||2==d)&&$.ajax({type:"POST",url:"/posts/validate-body",data:{body:c,oldBody:b.prop("defaultValue"),isQuestion:1==d,isSuggestedEdit:a},success:function(a){a.success?t(b):m(b,a.errors.Body,h())},error:function(){t(b)}})})}function o(e){var d=e.find(s);if(d.length){var a=d.find("input#tagnames");
a.blur(function(){var b=a.val();0==$.trim(b).length?t(d):$.ajax({type:"POST",url:"/posts/validate-tags",data:{tags:b,oldTags:a.prop("defaultValue")},success:function(a){a.success?t(d):m(d,a.errors.Tags,h())},error:function(){t(d)}})})}}function r(e){var d=e.find(A);d.length&&d.blur(function(){var a=d.val(),a=$.trim(a);if(0==a.length)t(d);else{var b=d.data("min-length");b&&a.length<b?m(d,["Your edit summary must be at least "+b+" characters."],h()):(b=d.data("max-length"))&&a.length>b?m(d,["Your edit summary cannot be longer than "+
b+" characters."],h()):t(d)}})}function g(e){var d=e.find(j);d.length&&d.blur(function(){var a=d.val(),a=$.trim(a);if(0==a.length)t(d);else{var b=d.data("min-length");b&&a.length<b?m(d,["Wiki Excerpt must be at least "+b+" characters; you entered "+a.length+"."],h()):(b=d.data("max-length"))&&a.length>b?m(d,["Wiki Excerpt cannot be longer than "+b+" characters; you entered "+a.length+"."],h()):t(d)}})}function k(e){var d=e.find(u);d.length&&d.blur(function(){var a=d.val();0==$.trim(a).length?t(d):
/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,20}$/i.test(a)?t(d):m(d,["This email does not appear to be valid."],v())})}function h(){var e=$("#sidebar, .sidebar").first().width()||270;return{position:{my:"left top",at:"right center"},css:{"max-width":e,"min-width":e},closeOtherPopups:!1}}function v(){return{position:{my:"left top",at:"right center"},css:{"min-width":$("#sidebar, .sidebar").first().width()||270},closeOtherPopups:!1}}function m(e,d,a){if(!d||0==d.length||!e.length)return!1;if((d=1==d.length?
d[0]:"<ul><li>"+d.join("</li><li>")+"</li></ul>")&&0<d.length){var b=e.data("error-popup");if(b&&b.is(":visible")){if(e.data("error-message")==d)return!0;b.fadeOutAndRemove()}a=StackExchange.helpers.showErrorPopup(e,d,a);e.find(".tag-editor").length?e.find(".tag-editor").addClass("validation-error"):e.is(C)||e.addClass("validation-error");e.data("error-popup",a);e.data("error-message",d);return!0}return!1}function t(e){var d=e.data("error-popup");d&&d.is(":visible")&&d.fadeOutAndRemove();e.find(".tag-editor").length?
e.find(".tag-editor").removeClass("validation-error"):e.removeClass("validation-error");e.removeData("error-popup");e.removeData("error-message")}var y="input#title",n="textarea.wmd-input",s=".tags-error-anchor",A="input[id^=edit-comment]",j="textarea#excerpt",u="input#m-address",C=".general-errors-container";return{init:function(e,d,a){i(e);p(e,d,a);o(e);r(e);g(e);k(e)},showErrors:function(e,d,a,b){function c(a,b,c,d){if(b&&0!=b.length&&a.length&&(b=1==b.length?b[0]:"<ul><li>"+b.join("</li><li>")+
"</li></ul>")&&0<b.length){var e=StackExchange.helpers.showErrorPopup(a,b,d),j;a.is('input[type="text"]')||a.is("textarea")?j=a:a.is(".tags-error-anchor")&&(j=a.find('input[type="text"], textarea').first());j&&j.change(function(){e.fadeOutAndRemove()});a=a.offset().top;if(!f||a<f)f=a;c?h=!0:g=!0;i++}}if(e){d.find(".error-popup").remove();d.find(".general-errors-container").empty();var f,g,h,i=0,j=$("#sidebar, .sidebar").first().width()||270;c(d.find(".general-errors-container"),e.General,!0,{position:"inline",
css:{"float":"left","margin-bottom":"10px"},closeOtherPopups:!1,dismissable:!1});c(d.find("input#title"),e.Title,!1,{position:{my:"left top",at:"right center"},css:{"max-width":j,"min-width":j},closeOtherPopups:!1});c(d.find("textarea.wmd-input"),e.Body,!1,{position:{my:"left top",at:"right center"},css:{"max-width":j,"min-width":j},closeOtherPopups:!1});c(d.find(".tags-error-anchor"),e.Tags,!1,{position:{my:"left top",at:"right center"},css:{"max-width":j,"min-width":j},closeOtherPopups:!1});c(d.find("input[id^=edit-comment]"),
e.EditComment,!1,{position:{my:"left top",at:"right center"},css:{"max-width":j,"min-width":j},closeOtherPopups:!1});c(d.find("textarea#excerpt"),e.Excerpt,!1,{position:{my:"left top",at:"right center"},css:{"max-width":j,"min-width":j},closeOtherPopups:!1});c(d.find("#m-address"),e.Email,!1,{position:{my:"left top",at:"right center"},css:{"min-width":j},closeOtherPopups:!1});g&&!h&&a&&0<a.length&&(e="Your "+a+" couldn't be submitted. Please see the "+(1==i?"error":"errors")+" above.",d.find(".general-errors-container").append('<div class="submit-error">'+
e+"</div>"));f&&(f=Math.max(0,f-(b?100:30)),$("html, body").animate({scrollTop:f}))}},showErrorsAfterSubmission:function(e,d,a,b){if(e){var c,f=0;c=0+m(d.find(C),e.General,{position:"inline",css:{"float":"left","margin-bottom":"10px"},closeOtherPopups:!1,dismissable:!1});f+=m(d.find(y),e.Title,h());f+=m(d.find(n),e.Body,h());f+=m(d.find(s),e.Tags,h());f+=m(d.find(A),e.EditComment,h());f+=m(d.find(j),e.Excerpt,h());f+=m(d.find(u),e.Email,v());0==c&&0<f&&a&&0<a.length&&(e="Your "+a+" couldn't be submitted. Please see the "+
(1==c+f?"error":"errors")+" above.",d.find(".general-errors-container").append('<div class="submit-error">'+e+"</div>"));var g;d.find(".validation-error, "+C).each(function(){var a=$(this).offset().top;if(!g||a<g)g=a});g&&(g=Math.max(0,g-(b?100:30)),$("html, body").animate({scrollTop:g}))}}}}();
